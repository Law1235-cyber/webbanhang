{% extends 'app/base.html' %}
{% load static %}
{% block cart_content %}
<div class="row">
    <div class="col-lg-12">
        
        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <a class="btn btn-outline-secondary" href="{% url 'home' %}">&#x2190; Ti·∫øp t·ª•c mua s·∫Øm</a>
                </div>

                <div class="row align-items-center border-top pt-3">
                    <div class="col-6 col-md-4 text-start">
                        <h5 class="mb-0">T·ªïng Items: <strong>{{ order.get_cart_items }}</strong></h5>
                    </div>
                    <div class="col-6 col-md-4 text-center">
                        <h5 class="mb-0 text-danger">T·ªïng Ti·ªÅn:<strong> ${{ order.get_cart_total|floatformat:2 }}</strong></h5>
                    </div>
                    <div class="col-12 col-md-4 text-end mt-3 mt-md-0">
                        <a class="btn btn-success w-100 w-md-auto" href="{% url 'checkout' %}">Ti·∫øn h√†nh Thanh to√°n</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-header bg-light">
                <div class="row text-center d-none d-md-flex fw-bold">
                    <div class="col-md-2"></div>
                    <div class="col-md-4 text-start">S·∫£n ph·∫©m</div>
                    <div class="col-md-2">Gi√°</div>
                    <div class="col-md-2">S·ªë l∆∞·ª£ng</div>
                    <div class="col-md-2">T·ªïng ti·ªÅn</div>
                </div>
            </div>
            
            <div class="card-body p-0">
            
            {# B·∫ÆT ƒê·∫¶U V√íNG L·∫∂P CHO C√ÅC S·∫¢N PH·∫®M TRONG GI·ªé H√ÄNG #}
            {% for item in items %}
                <div class="row g-0 py-3 border-bottom align-items-center text-center">
                    
                    <div class="col-3 col-md-2 d-flex justify-content-center">
                        <img class="img-fluid rounded" 
                            src="{{ item.product.imageURL }}" 
                            alt="{{ item.product.name }}" 
                            style="width: 70px; height: 70px; object-fit: cover;">
                    </div>

                    <div class="col-9 col-md-4 text-start ps-3">
                        <p class="fw-bold mb-0">{{ item.product.name }}</p>
                        <small class="text-muted d-block">
                            {% if item.product.sku %}M√£: {{ item.product.sku }} |{% endif %}
                            M√¥ t·∫£ ng·∫Øn v·ªÅ s·∫£n ph·∫©m...
                        </small>
                        <div class="d-md-none text-muted small mt-1">
                            ${{ item.product.price|floatformat:2 }} x {{ item.quantity }}
                        </div>
                    </div>

                    <div class="col-md-2 d-none d-md-block">
                        <p class="mb-0">${{ item.product.price|floatformat:2 }}</p>
                    </div>

                    <div class="col-6 col-md-2 text-center mt-2 mt-md-0">
                        <p class="mb-1 d-md-none fw-bold">SL</p>
                        <div class="d-flex align-items-center justify-content-center">
                            
                            
                            <p class="quantity mb-0 mx-1 fw-bold">{{ item.quantity }}</p>

                            <div class="d-flex flex-column" style="gap: 3px;">
                                <img class="chg-quantity update-cart-btn" data-product="{{ item.product.id }}" data-action="add" 
                                    src="{% static 'app/images/arrow-up.png' %}" style="width: 15px; cursor: pointer;">
                    
                                <img class="chg-quantity update-cart-btn" data-product="{{ item.product.id }}" data-action="remove" 
                                    src="{% static 'app/images/arrow-down.png' %}" style="width: 15px; cursor: pointer;">
                                    <small><a href="#" class="text-danger update-cart-btn " data-product="{{ item.product.id }}" data-action="delete">X√≥a</a></small>
                            </div>
                        </div>
                    </div>

                    <div class="col-6 col-md-2 text-center mt-2 mt-md-0">
                        <p class="mb-1 d-md-none fw-bold">T·ªïng</p>
                        <p class="mb-0 fw-bold text-danger">${{ item.get_total|floatformat:2 }}</p>
                    </div>
                </div>
            {% empty %}
                {# HI·ªÇN TH·ªä KHI GI·ªé H√ÄNG TR·ªêNG #}
                <div class="p-4 text-center">
                    <h4 class="text-muted">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng! üòü</h4>
                    <p class="mt-3">Vui l√≤ng quay l·∫°i <a href="{% url 'home' %}">trang mua s·∫Øm</a> ƒë·ªÉ th√™m s·∫£n ph·∫©m.</p>
                </div>
            {% endfor %}
            {# K·∫æT TH√öC V√íNG L·∫∂P #}
            
            </div>
        </div>

    </div>
</div>
{% endblock cart_content %}